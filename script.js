const translations = {
    fr: {
        nav: {
            home: "Accueil",
            about: "À Propos",
            activities: "Activités",
            events: "Événements",
            mission: "Mission",
            membership: "Adhésion",
            contact: "Contact"
        },
        hero: {
            title: "Association de la communauté <span class='text-gold'>Vietnamienne</span> de Nice",
            subtitle: "Promouvoir la culture, l'entraide et l'amitié franco-vietnamienne sur la Côte d'Azur.",
            btn_discover: "Découvrir l'Association",
            btn_join: "Nous Rejoindre"
        },
        about: {
            title: "Qui Sommes-Nous ?",
            intro: "<p>L'ACVNI est une organisation à but non lucratif créée dans le but de connecter, soutenir et accompagner la communauté vietnamienne vivant, étudiant et travaillant à Nice et sur la Côte d’Azur, pour un développement durable au sein de la société locale.</p><p>Nous visons à construire une communauté unie, ouverte et intégrée, où chaque membre peut trouver attachement, partage et fierté de ses racines vietnamiennes, tout en bénéficiant d'une entraide dans la vie quotidienne, le travail et les activités communautaires.</p>",
            goals_title: "Nos Objectifs",
            goals: {
                1: "Préserver et diffuser l'identité culturelle vietnamienne à travers des activités culturelles, artistiques et traditionnelles.",
                2: "Soutenir, connecter et aider la communauté vietnamienne de Nice à se développer, notamment dans l'intégration sociale et le partage d'expériences.",
                3: "Organiser de grands événements communautaires tels que le Têt, la Fête de la Mi-Automne et des échanges culturels.",
                4: "Promouvoir les échanges culturels franco-vietnamiens et renforcer les liens avec la société locale.",
                5: "Encourager la solidarité et la responsabilité sociale par le biais d'activités bénévoles."
            },
            vision_title: "Notre Vision",
            vision_desc: "L'ACVNI aspire à devenir un point d'ancrage culturel, social et spirituel pour la communauté vietnamienne de Nice ; un pont durable entre le Vietnam et la France, entre les générations, contribuant à bâtir une communauté vietnamienne unie, forte et intégrée."
        },
        mission: {
            title: "Mission & Vision"
        },
        activities: {
            title: "Nos Activités",
            tet: {
                title: "Fête du Têt",
                desc: "Célébration du Nouvel An Lunaire"
            },
            class: {
                title: "Cours de Vietnamien",
                desc: "Pour enfants et adultes"
            },
            cooking: {
                title: "Ateliers Culinaires",
                desc: "Découverte des saveurs du Vietnam"
            },
            culture: {
                title: "Sorties Culturelles",
                desc: "Visites et rencontres"
            }
        },
        events: {
            title: "Prochains Événements",
            event1: {
                title: "Célébration du Têt 2026",
                time: "18:00 - 23:00 | Salle des Fêtes de Nice",
                desc: "Rejoignez-nous pour célébrer l'année du Cheval avec un grand banquet et des spectacles traditionnels."
            },
            event2: {
                title: "Atelier Cuisine : Le Phở",
                time: "10:00 - 14:00 | Centre Culturel",
                desc: "Apprenez les secrets du bouillon traditionnel vietnamien avec nos chefs expérimentés."
            }
        },
        membership: {
            title: "Devenir Membre",
            subtitle: "Pourquoi nous rejoindre ?",
            desc: "En devenant membre de l'ACVNI, vous participez activement à la vie de la communauté. Vous bénéficiez de tarifs préférentiels sur nos événements et ateliers, et vous soutenez nos actions caritatives.",
            benefits: {
                title: "Avantages :",
                1: "✓ Accès prioritaire aux événements",
                2: "✓ Tarifs réduits sur les ateliers",
                3: "✓ Droit de vote à l'assemblée générale"
            },
            form: {
                title: "Formulaire d'Adhésion"
            },
            register_online_title: "Adhésion en ligne",
            register_online_desc: "Cliquez sur le bouton ci-dessous pour remplir le formulaire d'adhésion.",
            open_form_btn: "Ouvrir le formulaire d'adhésion"
        },
        contact: {
            title: "Contactez-Nous",
            desc: "Vous souhaitez devenir bénévole ou simplement en savoir plus sur nos activités ? N'hésitez pas à nous écrire.",
            phone: "Téléphone:",
            address: "Adresse:",
            send_email_title: "Envoyez-nous un email",
            send_email_desc: "Cliquez ci-dessous pour ouvrir votre application de messagerie",
            open_mail_app: "Ouvrir l'application Email",
            support_info: "Supporte : Gmail (Android), Mail (iOS), Outlook, etc."
        },
        form: {
            name: "Nom Complet",
            email: "Email",
            phone: "Téléphone",
            type_label: "Type d'Adhésion",
            message: "Message",
            submit: "Envoyer",
            submit_join: "S'inscrire",
            type_options: {
                student: "Étudiant",
                adult: "Adulte",
                family: "Famille"
            }
        },
        months: {
            feb: "Fév",
            mar: "Mar"
        },
        common: {
            readmore: "En savoir plus &rarr;"
        },
        footer: {
            copyright: "&copy; {year} Association de la communauté Vietnamienne de Nice. Tous droits réservés.",
            legal: "Mentions Légales",
            privacy: "Politique de Confidentialité"
        }
    },
    vi: {
        nav: {
            home: "Trang Chủ",
            about: "Giới Thiệu",
            activities: "Hoạt Động",
            events: "Sự Kiện",
            mission: "Sứ Mệnh",
            membership: "Thành viên",
            contact: "Liên hệ"
        },
        hero: {
            title: "Cộng đồng người <span class='text-gold'>Việt Nam</span> tại Nice",
            subtitle: "Phát huy văn hóa, tương trợ và tình hữu nghị Pháp-Việt tại vùng Côte d'Azur.",
            btn_discover: "Khám phá Hội",
            btn_join: "Tham gia ngay"
        },
        about: {
            title: "Giới Thiệu về cộng đồng",
            intro: "<p>Association de la Communauté Vietnamienne de Nice (ACVNI) là một tổ chức phi lợi nhuận được thành lập với mong muốn kết nối, hỗ trợ và đồng hành cùng cộng đồng người Việt Nam đang sinh sống, học tập và làm việc tại Nice và khu vực Côte d’Azur, cùng nhau phát triển bền vững trong xã hội sở tại.</p><p>ACVNI hướng tới việc xây dựng một cộng đồng đoàn kết, cởi mở và hội nhập, nơi mỗi thành viên đều có thể tìm thấy sự gắn bó, sẻ chia và niềm tự hào về nguồn cội Việt Nam, đồng thời nhận được sự hỗ trợ, giúp đỡ lẫn nhau trong đời sống, công việc và các hoạt động cộng đồng.</p>",
            goals_title: "Mục tiêu của ACVNI",
            goals: {
                1: "Gìn giữ và lan tỏa bản sắc văn hóa Việt Nam thông qua các hoạt động văn hóa – nghệ thuật – truyền thống.",
                2: "Hỗ trợ, kết nối và giúp đỡ cộng đồng người Việt tại Nice cùng phát triển, hòa nhập xã hội và chia sẻ kinh nghiệm sống.",
                3: "Tổ chức các sự kiện cộng đồng lớn như Tết cổ truyền, Trung Thu, lễ hội văn hóa và giao lưu nghệ thuật.",
                4: "Thúc đẩy giao lưu văn hóa Việt – Pháp, tăng cường sự hiểu biết và gắn kết giữa cộng đồng người Việt và xã hội sở tại.",
                5: "Khuyến khích tinh thần đoàn kết, tương trợ và trách nhiệm xã hội thông qua các hoạt động thiện nguyện."
            },
            vision_title: "Tầm nhìn",
            vision_desc: "ACVNI mong muốn trở thành một điểm tựa văn hóa, xã hội và tinh thần của cộng đồng người Việt tại Nice; là cầu nối bền vững giữa Việt Nam – Pháp, giữa các thế hệ, góp phần xây dựng một cộng đồng người Việt đoàn kết, vững mạnh và hội nhập tại Nice."
        },
        mission: {
            title: "Sứ Mệnh & Tầm Nhìn"
        },
        activities: {
            title: "Hoạt động của hội",
            tet: {
                title: "Tết Nguyên Đán",
                desc: "Lễ hội đón mừng năm mới âm lịch"
            },
            class: {
                title: "Lớp học tiếng Việt",
                desc: "Dành cho trẻ em và người lớn"
            },
            cooking: {
                title: "Lớp học nấu ăn",
                desc: "Khám phá hương vị ẩm thực Việt"
            },
            culture: {
                title: "Giao lưu văn hóa",
                desc: "Tham quan và gặp gỡ giao lưu"
            }
        },
        events: {
            title: "Sự kiện sắp tới",
            event1: {
                title: "Chào xuân Bính Ngọ 2026",
                time: "18:00 - 23:00 | Hội trường Nice",
                desc: "Hãy cùng chúng tôi đón chào năm mới với tiệc mừng và các tiết mục văn nghệ truyền thống."
            },
            event2: {
                title: "Lớp nấu phở truyền thống",
                time: "10:00 - 14:00 | Trung tâm Văn hóa",
                desc: "Học bí quyết nấu nước dùng phở đậm đà từ các đầu bếp giàu kinh nghiệm."
            }
        },
        membership: {
            title: "Đăng ký thành viên",
            subtitle: "Tại sao nên tham gia?",
            desc: "Trở thành thành viên của ACVNI, bạn sẽ đóng góp tích cực vào cộng đồng. Bạn được hưởng ưu đãi khi tham gia sự kiện và ủng hộ các hoạt động từ thiện.",
            benefits: {
                title: "Quyền lợi:",
                1: "✓ Ưu tiên tham gia các sự kiện",
                2: "✓ Giảm giá các lớp học và workshop",
                3: "✓ Quyền biểu quyết tại đại hội"
            },
            form: {
                title: "Đơn đăng ký"
            },
            register_online_title: "Đăng ký trực tuyến",
            register_online_desc: "Nhấn vào nút bên dưới để điền đơn đăng ký thành viên.",
            open_form_btn: "Mở Đơn Đăng Ký"
        },
        contact: {
            title: "Liên hệ",
            desc: "Bạn muốn trở thành tình nguyện viên hay tìm hiểu thêm về các hoạt động? Hãy liên hệ với chúng tôi.",
            phone: "Điện thoại:",
            address: "Địa chỉ:",
            send_email_title: "Gửi email cho chúng tôi",
            send_email_desc: "Nhấn vào bên dưới để mở ứng dụng email của bạn",
            open_mail_app: "Mở Ứng Dụng Email",
            support_info: "Hỗ trợ: Gmail (Android), Mail (iOS), Outlook, v.v."
        },
        form: {
            name: "Họ và Tên",
            email: "Email",
            phone: "Số Điện Thoại",
            type_label: "Loại thành viên",
            message: "Tin nhắn",
            submit: "Gửi tin nhắn",
            submit_join: "Đăng ký",
            type_options: {
                student: "Sinh viên",
                adult: "Người lớn",
                family: "Gia đình"
            }
        },
        months: {
            feb: "Th2",
            mar: "Th3"
        },
        common: {
            readmore: "Xem thêm &rarr;"
        },
        footer: {
            copyright: "&copy; {year} Cộng đồng người Việt Nam tại Nice. Bảo lưu mọi quyền.",
            legal: "Pháp lý",
            privacy: "Chính sách bảo mật"
        }
    },
    en: {
        nav: {
            home: "Home",
            about: "About",
            activities: "Activities",
            events: "Events",
            mission: "Mission",
            membership: "Membership",
            contact: "Contact"
        },
        hero: {
            title: "<span class='text-gold'>Vietnamese</span> Community in Nice",
            subtitle: "Promoting culture, mutual aid, and Franco-Vietnamese friendship on the French Riviera.",
            btn_discover: "Discover Us",
            btn_join: "Join Us"
        },
        about: {
            title: "About The Association",
            intro: "<p>ACVNI is a non-profit organization established to connect, support, and accompany the Vietnamese community living, studying, and working in Nice and the Côte d’Azur region.</p><p>We aim to build a united, open, and integrated community where every member can find connection and pride in their roots, while receiving mutual support in life and work.</p>",
            goals_title: "Our Goals",
            goals: {
                1: "Preserve and spread Vietnamese cultural identity through cultural, artistic, and traditional activities.",
                2: "Support and connect the Vietnamese community in Nice for mutual development and social integration.",
                3: "Organize major community events such as Tet (Lunar New Year), Mid-Autumn Festival, and cultural exchanges.",
                4: "Promote Vietnam-France cultural exchange and strengthen ties with the local society.",
                5: "Encourage solidarity and social responsibility through volunteer and community activities."
            },
            vision_title: "Our Vision",
            vision_desc: "ACVNI aspires to become a cultural, social, and spiritual anchor for the Vietnamese community in Nice; a sustainable bridge between Vietnam and France, between generations, contributing to building a united and strong community."
        },
        mission: {
            title: "Mission & Vision"
        },
        activities: {
            title: "Our Activities",
            tet: {
                title: "Tet Festival",
                desc: "Lunar New Year Celebration"
            },
            class: {
                title: "Vietnamese Classes",
                desc: "For children and adults"
            },
            cooking: {
                title: "Cooking Workshops",
                desc: "Discover Vietnamese flavors"
            },
            culture: {
                title: "Cultural Outings",
                desc: "Visits and meetups"
            }
        },
        events: {
            title: "Upcoming Events",
            event1: {
                title: "Tet Celebration 2026",
                time: "18:00 - 23:00 | Nice City Hall",
                desc: "Join us to celebrate the Year of the Horse with a grand banquet and traditional performances."
            },
            event2: {
                title: "Cooking Workshop: Phở",
                time: "10:00 - 14:00 | Cultural Center",
                desc: "Learn the secrets of traditional Vietnamese broth with our experienced chefs."
            }
        },
        membership: {
            title: "Become a Member",
            subtitle: "Why join us?",
            desc: "By becoming a member of ACVNI, you actively participate in community life. You get preferential rates on events and support our charitable actions.",
            benefits: {
                title: "Benefits:",
                1: "✓ Priority access to events",
                2: "✓ Reduced rates on workshops",
                3: "✓ Voting rights at the general assembly"
            },
            form: {
                title: "Membership Form"
            },
            register_online_title: "Register Online",
            register_online_desc: "Click the button below to fill out the membership form.",
            open_form_btn: "Open Registration Form"
        },
        contact: {
            title: "Contact Us",
            desc: "Want to become a volunteer or learn more about our activities? Feel free to write to us.",
            phone: "Phone:",
            address: "Address:",
            send_email_title: "Send us an email",
            send_email_desc: "Click below to open your email application",
            open_mail_app: "Open Email App",
            support_info: "Supports: Gmail (Android), Mail (iOS), Outlook, etc."
        },
        form: {
            name: "Full Name",
            email: "Email",
            phone: "Phone Number",
            type_label: "Membership Type",
            message: "Message",
            submit: "Send Message",
            submit_join: "Register",
            type_options: {
                student: "Student",
                adult: "Adult",
                family: "Family"
            }
        },
        months: {
            feb: "Feb",
            mar: "Mar"
        },
        common: {
            readmore: "Read more &rarr;"
        },
        footer: {
            copyright: "&copy; {year} Vietnamese Community in Nice. All rights reserved.",
            legal: "Legal Notice",
            privacy: "Privacy Policy"
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Language Switching Logic
    const langBtns = document.querySelectorAll('.lang-btn');
    let currentLang = localStorage.getItem('acvni_lang') || 'vi';

    function updateContent(lang) {
        // Update active button state
        langBtns.forEach(btn => {
            if (btn.dataset.lang === lang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Update text content
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const keys = key.split('.');
            let value = translations[lang];

            for (const k of keys) {
                if (value && value[k]) {
                    value = value[k];
                } else {
                    value = null;
                    break;
                }
            }

            if (value) {
                // Replace {year} with current year
                value = value.replace('{year}', new Date().getFullYear());

                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = value;
                } else if (element.tagName === 'OPTION') {
                    element.text = value;
                } else {
                    element.innerHTML = value;
                }
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = lang;
        localStorage.setItem('acvni_lang', lang);
    }

    // Initialize Language
    updateContent(currentLang);

    // Event Listeners for Language Buttons
    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            currentLang = btn.dataset.lang;
            updateContent(currentLang);
        });
    });

    // Mobile Navigation Toggle
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    const links = document.querySelectorAll('.nav-links li a'); // Only close on link click, not lang switch

    hamburger.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
    });

    // Close mobile menu when clicking a link
    links.forEach(link => {
        link.addEventListener('click', () => {
            navLinks.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });

    // Smooth Scrolling for Anchor Links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();

            const targetId = this.getAttribute('href');
            if (targetId === '#') return;

            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                const headerOffset = 80;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Navbar Scroll Effect
    const header = document.getElementById('header');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            header.style.padding = '10px 0';
            header.style.backgroundColor = 'rgba(1, 69, 44, 0.98)';
            header.style.boxShadow = '0 2px 10px rgba(0,0,0,0.3)';
        } else {
            header.style.padding = '15px 0';
            header.style.backgroundColor = 'rgba(1, 69, 44, 0.95)';
            header.style.boxShadow = 'none';
        }
    });

    // Form Submission Handling
    // Forms are now handled by Formspree via HTML action attributes
    // We can keep custom validation here if needed, but for now we'll let the browser handle the submission.

    // Scroll Animation (Simple Intersection Observer)
    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Add animation classes to elements
    const animatedElements = document.querySelectorAll('.about-card, .gallery-item');
    animatedElements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = `all 0.6s ease ${index * 0.1}s`;
        observer.observe(el);
    });
});
