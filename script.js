const translations = {
    fr: {
        nav: {
            home: "Accueil",
            about: "À Propos",
            activities: "Activités",
            events: "Événements",
            membership: "Adhésion",
            contact: "Contact"
        },
        hero: {
            title: "Association de la Communauté <span class='text-gold'>Vietnamienne</span> de Nice",
            subtitle: "Promouvoir la culture, l'entraide et l'amitié franco-vietnamienne sur la Côte d'Azur.",
            btn_discover: "Découvrir l'Association",
            btn_join: "Nous Rejoindre"
        },
        about: {
            title: "Qui Sommes-Nous ?",
            solidarity: {
                title: "Solidarité",
                desc: "Créer un réseau d'entraide fort pour les vietnamiens et amis du Vietnam résidant à Nice et ses environs."
            },
            culture: {
                title: "Culture",
                desc: "Préserver et partager la richesse de la culture vietnamienne à travers des événements artistiques et culinaires."
            },
            education: {
                title: "Éducation",
                desc: "Soutenir l'apprentissage de la langue vietnamienne et faciliter l'intégration des nouveaux arrivants."
            }
        },
        activities: {
            title: "Nos Activités",
            tet: {
                title: "Fête du Têt",
                desc: "Célébration du Nouvel An Lunaire"
            },
            class: {
                title: "Cours de Vietnamien",
                desc: "Pour enfants et adultes"
            },
            cooking: {
                title: "Ateliers Culinaires",
                desc: "Découverte des saveurs du Vietnam"
            },
            culture: {
                title: "Sorties Culturelles",
                desc: "Visites et rencontres"
            }
        },
        events: {
            title: "Prochains Événements",
            event1: {
                title: "Célébration du Têt 2026",
                time: "18:00 - 23:00 | Salle des Fêtes de Nice",
                desc: "Rejoignez-nous pour célébrer l'année du Cheval avec un grand banquet et des spectacles traditionnels."
            },
            event2: {
                title: "Atelier Cuisine : Le Phở",
                time: "10:00 - 14:00 | Centre Culturel",
                desc: "Apprenez les secrets du bouillon traditionnel vietnamien avec nos chefs expérimentés."
            }
        },
        membership: {
            title: "Devenir Membre",
            subtitle: "Pourquoi nous rejoindre ?",
            desc: "En devenant membre de l'ACVNI, vous participez activement à la vie de la communauté. Vous bénéficiez de tarifs préférentiels sur nos événements et ateliers, et vous soutenez nos actions caritatives.",
            benefits: {
                title: "Avantages :",
                1: "✓ Accès prioritaire aux événements",
                2: "✓ Tarifs réduits sur les ateliers",
                3: "✓ Droit de vote à l'assemblée générale"
            },
            form: {
                title: "Formulaire d'Adhésion"
            }
        },
        contact: {
            title: "Contactez-Nous",
            desc: "Vous souhaitez devenir bénévole ou simplement en savoir plus sur nos activités ? N'hésitez pas à nous écrire.",
            phone: "Téléphone:",
            address: "Adresse:",
            send_email_title: "Envoyez-nous un email",
            send_email_desc: "Cliquez ci-dessous pour ouvrir votre application de messagerie",
            open_mail_app: "Ouvrir l'application Email",
            support_info: "Supporte : Gmail (Android), Mail (iOS), Outlook, etc."
        },
        form: {
            name: "Nom Complet",
            email: "Email",
            phone: "Téléphone",
            type_label: "Type d'Adhésion",
            message: "Message",
            submit: "Envoyer",
            submit_join: "S'inscrire",
            type_options: {
                student: "Étudiant",
                adult: "Adulte",
                family: "Famille"
            }
        },
        months: {
            feb: "Fév",
            mar: "Mar"
        },
        common: {
            readmore: "En savoir plus &rarr;"
        },
        footer: {
            copyright: "&copy; 2025 Association de la Communauté Vietnamienne de Nice. Tous droits réservés.",
            legal: "Mentions Légales",
            privacy: "Politique de Confidentialité"
        }
    },
    vi: {
        nav: {
            home: "Trang Chủ",
            about: "Giới Thiệu",
            activities: "Hoạt Động",
            events: "Sự Kiện",
            membership: "Thành Viên",
            contact: "Liên Hệ"
        },
        hero: {
            title: "Hội Người <span class='text-gold'>Việt Nam</span> tại Nice",
            subtitle: "Phát huy văn hóa, tương trợ và tình hữu nghị Pháp-Việt tại vùng Côte d'Azur.",
            btn_discover: "Khám Phá Hội",
            btn_join: "Tham Gia Ngay"
        },
        about: {
            title: "Về Chúng Tôi",
            solidarity: {
                title: "Đoàn Kết",
                desc: "Xây dựng mạng lưới tương trợ vững mạnh cho người Việt và bạn bè yêu mến Việt Nam tại Nice."
            },
            culture: {
                title: "Văn Hóa",
                desc: "Gìn giữ và chia sẻ bản sắc văn hóa Việt Nam qua các sự kiện nghệ thuật và ẩm thực."
            },
            education: {
                title: "Giáo Dục",
                desc: "Hỗ trợ việc học tiếng Việt và giúp đỡ người mới đến hòa nhập cuộc sống."
            }
        },
        activities: {
            title: "Hoạt Động Của Hội",
            tet: {
                title: "Tết Nguyên Đán",
                desc: "Lễ hội đón mừng năm mới âm lịch"
            },
            class: {
                title: "Lớp Tiếng Việt",
                desc: "Dành cho trẻ em và người lớn"
            },
            cooking: {
                title: "Lớp Học Nấu Ăn",
                desc: "Khám phá hương vị ẩm thực Việt"
            },
            culture: {
                title: "Giao Lưu Văn Hóa",
                desc: "Tham quan và gặp gỡ giao lưu"
            }
        },
        events: {
            title: "Sự Kiện Sắp Tới",
            event1: {
                title: "Chào Xuân Bính Ngọ 2026",
                time: "18:00 - 23:00 | Hội trường Nice",
                desc: "Hãy cùng chúng tôi đón chào năm mới với tiệc mừng và các tiết mục văn nghệ truyền thống."
            },
            event2: {
                title: "Lớp Nấu Phở Truyền Thống",
                time: "10:00 - 14:00 | Trung tâm Văn hóa",
                desc: "Học bí quyết nấu nước dùng phở đậm đà từ các đầu bếp giàu kinh nghiệm."
            }
        },
        membership: {
            title: "Đăng Ký Thành Viên",
            subtitle: "Tại sao nên tham gia?",
            desc: "Trở thành thành viên của ACVNI, bạn sẽ đóng góp tích cực vào cộng đồng. Bạn được hưởng ưu đãi khi tham gia sự kiện và ủng hộ các hoạt động từ thiện.",
            benefits: {
                title: "Quyền lợi:",
                1: "✓ Ưu tiên tham gia các sự kiện",
                2: "✓ Giảm giá các lớp học và workshop",
                3: "✓ Quyền biểu quyết tại đại hội"
            },
            form: {
                title: "Đơn Đăng Ký"
            }
        },
        contact: {
            title: "Liên Hệ",
            desc: "Bạn muốn trở thành tình nguyện viên hay tìm hiểu thêm về các hoạt động? Hãy liên hệ với chúng tôi.",
            phone: "Điện thoại:",
            address: "Địa chỉ:",
            send_email_title: "Gửi email cho chúng tôi",
            send_email_desc: "Nhấn vào bên dưới để mở ứng dụng email của bạn",
            open_mail_app: "Mở Ứng Dụng Email",
            support_info: "Hỗ trợ: Gmail (Android), Mail (iOS), Outlook, v.v."
        },
        form: {
            name: "Họ và Tên",
            email: "Email",
            phone: "Số Điện Thoại",
            type_label: "Loại Thành Viên",
            message: "Tin Nhắn",
            submit: "Gửi Tin Nhắn",
            submit_join: "Đăng Ký",
            type_options: {
                student: "Sinh viên",
                adult: "Người lớn",
                family: "Gia đình"
            }
        },
        months: {
            feb: "Th2",
            mar: "Th3"
        },
        common: {
            readmore: "Xem thêm &rarr;"
        },
        footer: {
            copyright: "&copy; 2025 Hội Người Việt Nam tại Nice. Bảo lưu mọi quyền.",
            legal: "Pháp lý",
            privacy: "Chính sách bảo mật"
        }
    },
    en: {
        nav: {
            home: "Home",
            about: "About",
            activities: "Activities",
            events: "Events",
            membership: "Membership",
            contact: "Contact"
        },
        hero: {
            title: "Association of the <span class='text-gold'>Vietnamese</span> Community in Nice",
            subtitle: "Promoting culture, mutual aid, and Franco-Vietnamese friendship on the French Riviera.",
            btn_discover: "Discover Us",
            btn_join: "Join Us"
        },
        about: {
            title: "Who Are We?",
            solidarity: {
                title: "Solidarity",
                desc: "Creating a strong support network for Vietnamese people and friends of Vietnam residing in Nice."
            },
            culture: {
                title: "Culture",
                desc: "Preserving and sharing the richness of Vietnamese culture through artistic and culinary events."
            },
            education: {
                title: "Education",
                desc: "Supporting Vietnamese language learning and facilitating the integration of newcomers."
            }
        },
        activities: {
            title: "Our Activities",
            tet: {
                title: "Tet Festival",
                desc: "Lunar New Year Celebration"
            },
            class: {
                title: "Vietnamese Classes",
                desc: "For children and adults"
            },
            cooking: {
                title: "Cooking Workshops",
                desc: "Discover Vietnamese flavors"
            },
            culture: {
                title: "Cultural Outings",
                desc: "Visits and meetups"
            }
        },
        events: {
            title: "Upcoming Events",
            event1: {
                title: "Tet Celebration 2026",
                time: "18:00 - 23:00 | Nice City Hall",
                desc: "Join us to celebrate the Year of the Horse with a grand banquet and traditional performances."
            },
            event2: {
                title: "Cooking Workshop: Phở",
                time: "10:00 - 14:00 | Cultural Center",
                desc: "Learn the secrets of traditional Vietnamese broth with our experienced chefs."
            }
        },
        membership: {
            title: "Become a Member",
            subtitle: "Why join us?",
            desc: "By becoming a member of ACVNI, you actively participate in community life. You get preferential rates on events and support our charitable actions.",
            benefits: {
                title: "Benefits:",
                1: "✓ Priority access to events",
                2: "✓ Reduced rates on workshops",
                3: "✓ Voting rights at the general assembly"
            },
            form: {
                title: "Membership Form"
            }
        },
        contact: {
            title: "Contact Us",
            desc: "Want to become a volunteer or learn more about our activities? Feel free to write to us.",
            phone: "Phone:",
            address: "Address:",
            send_email_title: "Send us an email",
            send_email_desc: "Click below to open your email application",
            open_mail_app: "Open Email App",
            support_info: "Supports: Gmail (Android), Mail (iOS), Outlook, etc."
        },
        form: {
            name: "Full Name",
            email: "Email",
            phone: "Phone Number",
            type_label: "Membership Type",
            message: "Message",
            submit: "Send Message",
            submit_join: "Register",
            type_options: {
                student: "Student",
                adult: "Adult",
                family: "Family"
            }
        },
        months: {
            feb: "Feb",
            mar: "Mar"
        },
        common: {
            readmore: "Read more &rarr;"
        },
        footer: {
            copyright: "&copy; 2025 Association of the Vietnamese Community in Nice. All rights reserved.",
            legal: "Legal Notice",
            privacy: "Privacy Policy"
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Language Switching Logic
    const langBtns = document.querySelectorAll('.lang-btn');
    let currentLang = localStorage.getItem('acvni_lang') || 'vi';

    function updateContent(lang) {
        // Update active button state
        langBtns.forEach(btn => {
            if (btn.dataset.lang === lang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Update text content
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const keys = key.split('.');
            let value = translations[lang];

            for (const k of keys) {
                if (value && value[k]) {
                    value = value[k];
                } else {
                    value = null;
                    break;
                }
            }

            if (value) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = value;
                } else if (element.tagName === 'OPTION') {
                    element.text = value;
                } else {
                    element.innerHTML = value;
                }
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = lang;
        localStorage.setItem('acvni_lang', lang);
    }

    // Initialize Language
    updateContent(currentLang);

    // Event Listeners for Language Buttons
    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            currentLang = btn.dataset.lang;
            updateContent(currentLang);
        });
    });

    // Mobile Navigation Toggle
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    const links = document.querySelectorAll('.nav-links li a'); // Only close on link click, not lang switch

    hamburger.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
    });

    // Close mobile menu when clicking a link
    links.forEach(link => {
        link.addEventListener('click', () => {
            navLinks.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });

    // Smooth Scrolling for Anchor Links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();

            const targetId = this.getAttribute('href');
            if (targetId === '#') return;

            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                const headerOffset = 80;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Navbar Scroll Effect
    const header = document.getElementById('header');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            header.style.padding = '10px 0';
            header.style.backgroundColor = 'rgba(10, 10, 10, 0.98)';
            header.style.boxShadow = '0 2px 10px rgba(0,0,0,0.3)';
        } else {
            header.style.padding = '15px 0';
            header.style.backgroundColor = 'rgba(10, 10, 10, 0.95)';
            header.style.boxShadow = 'none';
        }
    });

    // Form Submission Handling
    // Forms are now handled by Formspree via HTML action attributes
    // We can keep custom validation here if needed, but for now we'll let the browser handle the submission.

    // Scroll Animation (Simple Intersection Observer)
    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Add animation classes to elements
    const animatedElements = document.querySelectorAll('.about-card, .gallery-item, .event-card');
    animatedElements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = `all 0.6s ease ${index * 0.1}s`;
        observer.observe(el);
    });
});
